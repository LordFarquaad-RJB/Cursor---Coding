{"version":3,"file":"TrapSystem-v2.js","sources":["../src/trap-core.js","../src/trap-utils.js","../src/trap-detection.js","../src/trap-interaction.js","../src/trap-macros.js","../src/trap-ui.js","../src/trap-triggers.js","../src/trap-detector.js","../src/index.js"],"sourcesContent":["// src/trap-core.js\n// Core configuration and state for TrapSystem v2\n\nexport const Config = {\n  DEBUG: false,\n  DEFAULT_GRID_SIZE: 70,\n  DEFAULT_SCALE: 5,\n  MIN_MOVEMENT_FACTOR: 0.3,\n  aura: {\n    TARGET_RADIUS_GRID_UNITS: 1.0,   // default aura size in GU\n    VISIBILITY_BOOST_GU: 0.3        // extra radius so aura is always visible\n  },\n  AURA_COLORS: {\n    ARMED: '#00ff00',\n    ARMED_INTERACTION: '#6aa84f',\n    DISARMED: '#ff0000',\n    DISARMED_INTERACTION: '#a61c00',\n    PAUSED: '#ffa500',\n    DETECTION: '#808080',\n    DETECTED: '#c0c0c0',\n    DISARMED_UNDETECTED: '#00008B',\n    DISARMED_DETECTED: '#A9A9A9',\n    DETECTION_OFF: '#222222',\n    PASSIVE_DISABLED: '#5b0f00'\n  },\n  SKILL_TYPES: {\n    'Flat Roll': '🎲',\n    Acrobatics: '🤸',\n    'Animal Handling': '🐎',\n    Arcana: '✨',\n    Athletics: '💪',\n    Deception: '🎭',\n    History: '📚',\n    Insight: '👁️',\n    Intimidation: '😠',\n    Investigation: '🔍',\n    Medicine: '⚕️',\n    Nature: '🌿',\n    Perception: '👀',\n    Performance: '🎪',\n    Persuasion: '💬',\n    Religion: '⛪',\n    'Sleight of Hand': '🎯',\n    Stealth: '👥',\n    Survival: '🏕️',\n    'Strength Check': '💪',\n    'Strength Saving Throw': '🛡️💪',\n    'Dexterity Check': '🤸',\n    'Dexterity Saving Throw': '🛡️🤸',\n    'Constitution Check': '🏋️',\n    'Constitution Saving Throw': '🛡️🏋️',\n    'Intelligence Check': '🧠',\n    'Intelligence Saving Throw': '🛡️🧠',\n    'Wisdom Check': '👁️',\n    'Wisdom Saving Throw': '🛡️👁️',\n    'Charisma Check': '💬',\n    'Charisma Saving Throw': '🛡️💬'\n  }\n};\n\n// Simple central state store (will be fleshed out later)\nexport const State = {\n  warnedInvalidGridPages: {}\n};\n\nexport const core = {\n  Config,\n  State\n};\n\nexport default core;","// src/trap-utils.js\n// Shared helper functions used across TrapSystem modules.\n// Initially contains only a subset (quick-win helpers) – we will migrate\n// the rest of the giant utils object here piece-by-piece.\n\n/* eslint-disable no-console */\n\nimport { Config, State } from './trap-core.js';\n\nexport function log(message, type = 'info') {\n  const prefix = {\n    info: '📜',\n    error: '❌',\n    success: '✅',\n    warning: '⚠️',\n    debug: '🔍'\n  }[type] || '📜';\n  console.log(`${prefix} TrapSystem: ${message}`);\n}\n\n// Quick-win utility #1 – centralised trap-token validation\nexport function validateTrapToken(token, actionName = 'action') {\n  if (!token) {\n    log(`Error: No token supplied for ${actionName}.`, 'error');\n    return false;\n  }\n  if (!globalThis.TrapSystem || !globalThis.TrapSystem.utils || typeof globalThis.TrapSystem.utils.isTrap !== 'function') {\n    // During early bootstrap the monolith may not be loaded. We simply assume OK.\n    return true;\n  }\n  if (!globalThis.TrapSystem.utils.isTrap(token)) {\n    log(`Error: Selected token is not a trap. (${actionName})`, 'error');\n    return false;\n  }\n  return true;\n}\n\n// Quick-win utility #2 – parameter length guard for chat commands\nexport function validateCommandArgs(args, minLength, commandName = 'command') {\n  if (args.length < minLength) {\n    log(`Error: Missing parameters for ${commandName}.`, 'error');\n    return false;\n  }\n  return true;\n}\n\nexport const TrapUtils = {\n  log,\n  validateTrapToken,\n  validateCommandArgs\n};\n\nexport default TrapUtils;\n\n// ------------------------------------------------------------------\n// Legacy util functions migrated from v1 (minimal initial subset)\n// ------------------------------------------------------------------\n\n// NOTE: These still rely on Roll20 API globals (getObj, sendChat, etc.) –\n// that is OK because after bundling they run inside the Roll-20 sandbox.\n\nexport function playerIsGM(playerId) {\n  const player = getObj && getObj('player', playerId);\n  if (!player) return false;\n  return player.get('_online') && player.get('_type') === 'player' && player.get('_isGM');\n}\n\nexport function chat(message) {\n  if (typeof message !== 'string') return;\n  sendChat('TrapSystem', `/w gm ${message}`);\n}\n\nexport function getGMPlayerIds() {\n  const allPlayers = findObjs ? findObjs({ _type: 'player' }) : [];\n  return allPlayers.filter(p => playerIsGM(p.id)).map(p => p.id);\n}\n\nexport function whisper(recipientId, message) {\n  if (!recipientId || !message) return;\n  // First assume playerId\n  const player = getObj && getObj('player', recipientId);\n  if (player) {\n    sendChat('TrapSystem', `/w \"${player.get('displayname')}\" ${message}`);\n    return;\n  }\n  // Maybe a token representing a character → whisper to controllers.\n  const token = getObj && getObj('graphic', recipientId);\n  if (token && token.get('represents')) {\n    const char = getObj('character', token.get('represents'));\n    if (char) {\n      const controllers = (char.get('controlledby') || '').split(',').map(s => s.trim()).filter(Boolean);\n      controllers.forEach(pid => {\n        const p = getObj('player', pid);\n        if (p) sendChat('TrapSystem', `/w \"${p.get('displayname')}\" ${message}`);\n      });\n      return;\n    }\n  }\n  // Fallback to GM\n  chat(`Could not find a valid recipient for ID ${recipientId}. Msg: ${message}`);\n}\n\nexport function decodeHtml(text) {\n  if (typeof text !== 'string') return text;\n  return text\n    .replace(/&amp;/g, '&')\n    .replace(/&lt;/g, '<')\n    .replace(/&gt;/g, '>')\n    .replace(/&quot;/g, '\"')\n    .replace(/&#39;/g, \"'\");\n}\n\n// Quick check to see if a token is a trap (based on gmnotes)\nexport function isTrap(token) {\n  if (!token) return false;\n  const notes = token.get ? token.get('gmnotes') : '';\n  if (!notes) return false;\n  let decoded = '';\n  try { decoded = decodeURIComponent(notes); } catch (e) { decoded = notes; }\n  return decoded.includes('!traptrigger');\n}\n\n// Utility for images (used by menus)\nexport function getTokenImageURL(token, size = 'med') {\n  if (!token) return '👤';\n  const sanitize = url => {\n    if (!url) return null;\n    let processed = url.replace(/(thumb|max)(?=\\.[^/]+$)/, size);\n    processed = processed.replace(/\\(/g, '%28').replace(/\\)/g, '%29').replace(/'/g, '%27').replace(/\"/g, '%22');\n    return processed;\n  };\n  let img = token.get('imgsrc');\n  if (!img) {\n    const charId = token.get('represents');\n    if (charId) {\n      const char = getObj('character', charId);\n      if (char) {\n        img = char.get('avatar') || char.get('imgsrc');\n      }\n    }\n  }\n  const sanitized = sanitize(img);\n  return sanitized || '👤';\n}\n\n// Merge into export object\nObject.assign(TrapUtils, {\n  playerIsGM,\n  chat,\n  getGMPlayerIds,\n  whisper,\n  decodeHtml,\n  isTrap,\n  getTokenImageURL\n});\n\n// ------------------------------------------------------------------\n// Geometry helpers (migrated)\n// ------------------------------------------------------------------\n\nfunction lineIntersection(x1, y1, x2, y2, x3, y3, x4, y4) {\n  const denom = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n  if (!denom) return null;\n  const t = ((x1 - x3) * (y3 - y4) - (y1 - y3) * (x3 - x4)) / denom;\n  const u = -((x1 - x2) * (y1 - y3) - (y1 - y2) * (x1 - x3)) / denom;\n  if (t >= 0 && t <= 1 && u >= 0 && u <= 1) {\n    return { x: x1 + t * (x2 - x1), y: y1 + t * (y2 - y1) };\n  }\n  return null;\n}\n\nfunction getTokenCenter(token) {\n  return { x: token.get('left'), y: token.get('top') };\n}\n\nfunction getOBBCorners(token) {\n  if (!token) return null;\n  const centerX = token.get('left');\n  const centerY = token.get('top');\n  const width = token.get('width');\n  const height = token.get('height');\n  const rotationDeg = token.get('rotation') || 0;\n  const rotationRad = rotationDeg * (Math.PI / 180);\n\n  const halfW = width / 2;\n  const halfH = height / 2;\n\n  const localCorners = [\n    { x: -halfW, y: -halfH }, // TL\n    { x: halfW, y: -halfH },  // TR\n    { x: halfW, y: halfH },   // BR\n    { x: -halfW, y: halfH }   // BL\n  ];\n\n  const cosR = Math.cos(rotationRad);\n  const sinR = Math.sin(rotationRad);\n  return localCorners.map(c => ({\n    x: centerX + c.x * cosR - c.y * sinR,\n    y: centerY + c.x * sinR + c.y * cosR\n  }));\n}\n\nfunction isPointInOBB(point, corners) {\n  if (!point || !Array.isArray(corners) || corners.length !== 4) return false;\n  const c0 = corners[0];\n  const c1 = corners[1];\n  const c3 = corners[3];\n  const ABx = c1.x - c0.x;\n  const ABy = c1.y - c0.y;\n  const ADx = c3.x - c0.x;\n  const ADy = c3.y - c0.y;\n  const APx = point.x - c0.x;\n  const APy = point.y - c0.y;\n  const dotAB_AP = APx * ABx + APy * ABy;\n  const dotAD_AP = APx * ADx + APy * ADy;\n  const magSqAB = ABx * ABx + ABy * ABy;\n  const magSqAD = ADx * ADx + ADy * ADy;\n  return (0 <= dotAB_AP && dotAB_AP <= magSqAB && 0 <= dotAD_AP && dotAD_AP <= magSqAD);\n}\n\nfunction getPageSettings(pageId) {\n  const page = getObj ? getObj('page', pageId) : null;\n  if (!page) {\n    if (!State.warnedInvalidGridPages[pageId || 'unknown']) {\n      log(`Page ${pageId} not found, using defaults`, 'warning');\n      State.warnedInvalidGridPages[pageId || 'unknown'] = true;\n    }\n    return {\n      gridSize: Config.DEFAULT_GRID_SIZE,\n      scale: Config.DEFAULT_SCALE,\n      gridType: 'square',\n      valid: false\n    };\n  }\n  let gridSize = page.get('gridsize');\n  const snap = page.get('snapping_increment');\n  if (snap === 0 || !gridSize || gridSize < 2) {\n    gridSize = Config.DEFAULT_GRID_SIZE;\n  }\n  return {\n    gridSize,\n    scale: page.get('scale_number') || Config.DEFAULT_SCALE,\n    gridType: page.get('grid_type'),\n    valid: true\n  };\n}\n\nfunction getTokenGridCoords(token) {\n  if (!token) return null;\n  const ps = getPageSettings(token.get('_pageid'));\n  const g = ps.gridSize;\n  const left = token.get('left');\n  const top = token.get('top');\n  const w = token.get('width');\n  const h = token.get('height');\n  return {\n    x: Math.round((left - w / 2) / g),\n    y: Math.round((top - h / 2) / g),\n    width: Math.ceil(w / g),\n    height: Math.ceil(h / g),\n    gridSize: g,\n    scale: ps.scale,\n    gridType: ps.gridType,\n    pixelX: left,\n    pixelY: top,\n    tokenWidth: w,\n    tokenHeight: h\n  };\n}\n\nfunction calculateTokenDistance(token1, token2) {\n  if (!token1 || !token2 || token1.get('_pageid') !== token2.get('_pageid')) return { pixelDistance: Infinity, mapUnitDistance: Infinity };\n  const ps = getPageSettings(token1.get('_pageid'));\n  const c1 = getTokenGridCoords(token1);\n  const c2 = getTokenGridCoords(token2);\n  const dx = c1.pixelX - c2.pixelX;\n  const dy = c1.pixelY - c2.pixelY;\n  const pixelDistance = Math.sqrt(dx * dx + dy * dy);\n  const mapUnitDistance = (pixelDistance / ps.gridSize) * ps.scale;\n  return { pixelDistance, mapUnitDistance };\n}\n\nTrapUtils.geometry = {\n  lineIntersection,\n  getTokenCenter,\n  getOBBCorners,\n  isPointInOBB,\n  getPageSettings,\n  getTokenGridCoords,\n  calculateTokenDistance\n};\n\nfunction getSafeMacroDisplayName(macroString, maxLength = 25) {\n  if (!macroString || typeof macroString !== 'string') return '(DE)';\n  let display = macroString.trim();\n  // Macro\n  if (display.startsWith('#')) return `Macro: ${display.slice(1)}`;\n  // API command disguised with $ or true !\n  if (display.startsWith('$')) display = `Cmd: !${display.slice(1)}`;\n  else if (display.startsWith('!')) display = `Cmd: ${display}`;\n  // Template\n  else if (display.startsWith('&{')) {\n    const nameMatch = display.match(/\\{\\{name=([^}]+)\\}\\}/);\n    return nameMatch ? `Template: \"${nameMatch[1].trim()}\"` : 'Chat Template';\n  } else {\n    display = `Text: \"${display}\"`;\n  }\n  if (display.length > maxLength) return display.slice(0, maxLength - 3) + '...';\n  return display;\n}\n\nTrapUtils.getSafeMacroDisplayName = getSafeMacroDisplayName;\n\n// ------------------------------------------------------------------\n// Migrated core parsing + state helpers (simplified v1)\n// ------------------------------------------------------------------\n\n// Quick/partial GM-notes parser for the modern {!traptrigger …} format.\n// It extracts: type, currentUses, maxUses, isArmed, position, etc.\nexport function parseTrapNotes(rawNotes, token = null) {\n  if (!rawNotes) return null;\n  let decoded = rawNotes;\n  try { decoded = decodeURIComponent(rawNotes); } catch (_) {}\n  decoded = decoded.replace(/<br\\s*\\/?>/gi, ' ').replace(/\\n/g, ' ').trim();\n\n  // Look for the first {!traptrigger …} block\n  const m = decoded.match(/\\{!traptrigger\\s+([^}]*)\\}/i);\n  if (!m) return null;\n  const body = m[1];\n  const getSetting = key => {\n    const s = new RegExp(`${key}:\\\\s*\\\\[([^\\\\]]*)\\\\]`, 'i').exec(body);\n    return s ? s[1].trim() : null;\n  };\n  \n  const type = getSetting('type') || 'standard';\n  const usesStr = getSetting('uses') || '0/0';\n  const usesParts = usesStr.match(/(\\d+)\\/(\\d+)/) || [0, 0, 0];\n  const currentUses = parseInt(usesParts[1], 10);\n  const maxUses = parseInt(usesParts[2], 10);\n  const armed = (getSetting('armed') || 'on').toLowerCase() === 'on';\n  \n  // Extract macros\n  const primaryMacro = getSetting('primaryMacro');\n  const successMacro = getSetting('successMacro');\n  const failureMacro = getSetting('failureMacro');\n  const optionsStr = getSetting('options');\n  const options = optionsStr ? optionsStr.split(';').map(opt => ({ macro: opt.trim() })).filter(o => o.macro) : [];\n  \n  // Extract checks\n  const checksStr = getSetting('checks');\n  const checks = checksStr ? checksStr.split(';').map(chk => {\n    const parts = chk.split(':');\n    return parts.length === 2 ? { type: parts[0].trim(), dc: parseInt(parts[1], 10) } : null;\n  }).filter(Boolean) : [];\n  \n  // Extract position\n  const posStr = getSetting('position') || 'intersection';\n  let position = posStr;\n  const coordMatch = posStr.match(/(\\d+)\\s*,\\s*(\\d+)/);\n  if (coordMatch) position = { x: parseInt(coordMatch[1], 10), y: parseInt(coordMatch[2], 10) };\n  \n  // Extract flags\n  const movementTrigger = (getSetting('movementTrigger') || 'on').toLowerCase() === 'on';\n  const autoTrigger = (getSetting('autoTrigger') || 'off').toLowerCase() === 'on';\n\n  const data = {\n    type,\n    currentUses,\n    maxUses,\n    isArmed: armed,\n    primaryMacro: primaryMacro ? { macro: primaryMacro } : null,\n    successMacro,\n    failureMacro,\n    options,\n    checks,\n    position,\n    movementTrigger,\n    autoTrigger,\n    raw: decoded\n  };\n\n  // Minimal visual sync (update aura) if token provided\n  if (token) {\n    const color = armed ? Config.AURA_COLORS.ARMED : Config.AURA_COLORS.DISARMED;\n    token.set({\n      aura1_color: color,\n      aura1_radius: calculateDynamicAuraRadius(token),\n      showplayers_aura1: false,\n      bar1_value: currentUses,\n      bar1_max: maxUses,\n      showplayers_bar1: false\n    });\n  }\n  return data;\n}\n\nexport function calculateDynamicAuraRadius(token) {\n  if (!token) return Config.aura.TARGET_RADIUS_GRID_UNITS * (Config.DEFAULT_SCALE || 1);\n  const ps = getPageSettings(token.get('_pageid'));\n  if (!ps.valid) return Config.aura.TARGET_RADIUS_GRID_UNITS * ps.scale;\n  const wGU = token.get('width') / ps.gridSize;\n  const hGU = token.get('height') / ps.gridSize;\n  const minGU = Math.min(wGU, hGU);\n  // If token larger than aura diameter keep aura inside borders using negative radius hack\n  if (minGU >= Config.aura.TARGET_RADIUS_GRID_UNITS * 2) {\n    return -(minGU * 0.5) + Config.aura.VISIBILITY_BOOST_GU * ps.scale;\n  }\n  // Otherwise use positive radius scaled to units\n  return Config.aura.TARGET_RADIUS_GRID_UNITS * ps.scale;\n}\n\nexport function updateTrapUses(token, current, max, armed = null) {\n  if (!token) return;\n  let notes = token.get('gmnotes') || '';\n  let dec = notes;\n  try { dec = decodeURIComponent(notes); } catch (_) {}\n  const repl = (field, value) => {\n    const re = new RegExp(`${field}:\\\\s*\\\\[[^\\\\]]*\\\\]`);\n    if (re.test(dec)) dec = dec.replace(re, `${field}:[${value}]`);\n    else dec = dec.replace(/\\{!traptrigger/, `{!traptrigger ${field}:[${value}]`);\n  };\n  repl('uses', `${current}/${max}`);\n  if (armed !== null) repl('armed', armed ? 'on' : 'off');\n  token.set('gmnotes', encodeURIComponent(dec));\n\n  // sync bars & aura\n  token.set({\n    bar1_value: current,\n    bar1_max: max,\n    aura1_color: armed === false ? Config.AURA_COLORS.DISARMED : Config.AURA_COLORS.ARMED,\n    aura1_radius: calculateDynamicAuraRadius(token),\n    showplayers_bar1: false,\n    showplayers_aura1: false\n  });\n}\n\n// Attach to export object\nObject.assign(TrapUtils, {\n  parseTrapNotes,\n  calculateDynamicAuraRadius,\n  updateTrapUses\n});","// src/trap-detection.js\n// Passive detection logic (line-of-sight, perception checks, aura updates)\n\nimport TrapUtils from './trap-utils.js';\nimport { Config } from './trap-core.js';\n\n// Wrapper around legacy LOS check\nfunction checkLineOfSight(token1, token2) {\n  const legacyUtils = globalThis.TrapSystem && globalThis.TrapSystem.utils;\n  if (legacyUtils && typeof legacyUtils.checkLineOfSight === 'function') {\n    return legacyUtils.checkLineOfSight(token1, token2);\n  }\n  // Simple fallback - just check if tokens are on same page\n  return token1.get('_pageid') === token2.get('_pageid');\n}\n\n// Calculate if a character can potentially spot a trap based on distance and LOS\nfunction canDetectTrap(characterToken, trapToken, maxDistance = 60) {\n  if (!characterToken || !trapToken) return false;\n  \n  const distance = TrapUtils.geometry.calculateTokenDistance(characterToken, trapToken);\n  if (distance.mapUnitDistance > maxDistance) return false;\n  \n  return checkLineOfSight(characterToken, trapToken);\n}\n\n// Update trap aura colors based on detection state\nfunction updateTrapAura(trapToken, detectionState) {\n  if (!trapToken) return;\n  \n  const legacyUtils = globalThis.TrapSystem && globalThis.TrapSystem.utils;\n  if (legacyUtils && typeof legacyUtils.parseTrapNotes === 'function') {\n    const trapData = legacyUtils.parseTrapNotes(trapToken.get('gmnotes'), trapToken);\n    if (!trapData) return;\n    \n    let auraColor;\n    if (detectionState.isDetected) {\n      auraColor = trapData.isArmed ? Config.AURA_COLORS.DETECTED : Config.AURA_COLORS.DISARMED_DETECTED;\n    } else {\n      auraColor = trapData.isArmed ? Config.AURA_COLORS.DETECTION : Config.AURA_COLORS.DISARMED_UNDETECTED;\n    }\n    \n    trapToken.set({\n      aura1_color: auraColor,\n      aura1_square: false\n    });\n  }\n}\n\n// Perform passive perception check for a character against a trap\nfunction performPassivePerceptionCheck(characterToken, trapToken, passivePerception = 10) {\n  const legacyUtils = globalThis.TrapSystem && globalThis.TrapSystem.utils;\n  if (legacyUtils && typeof legacyUtils.parseTrapNotes === 'function') {\n    const trapData = legacyUtils.parseTrapNotes(trapToken.get('gmnotes'), trapToken);\n    if (!trapData || !trapData.passivePerception) return false;\n    \n    const trapDC = parseInt(trapData.passivePerception) || 15;\n    return passivePerception >= trapDC;\n  }\n  return false;\n}\n\n// Main passive detection handler\nfunction handlePassiveDetection(characterToken, nearbyTraps = []) {\n  if (!characterToken) return;\n  \n  nearbyTraps.forEach(trapToken => {\n    if (!canDetectTrap(characterToken, trapToken)) return;\n    \n    // Get character's passive perception (simplified - would need character sheet integration)\n    const passivePerception = 10; // Default, should be extracted from character sheet\n    \n    const isDetected = performPassivePerceptionCheck(characterToken, trapToken, passivePerception);\n    \n    updateTrapAura(trapToken, { isDetected });\n    \n    if (isDetected) {\n      TrapUtils.log(`${characterToken.get('name')} detected a trap!`, 'success');\n    }\n  });\n}\n\nexport const detection = {\n  checkLineOfSight,\n  canDetectTrap,\n  updateTrapAura,\n  performPassivePerceptionCheck,\n  handlePassiveDetection\n};\n\nexport default detection;","// src/trap-interaction.js\n// Interaction logic (menus, skill checks) for trap system\n\nimport TrapUtils from './trap-utils.js';\nimport { Config } from './trap-core.js';\n\n// Perform a skill check against a trap\nfunction performSkillCheck(characterToken, trapToken, skillType, rollResult = null) {\n  if (!characterToken || !trapToken) {\n    TrapUtils.log('Invalid tokens for skill check', 'error');\n    return { success: false, message: 'Invalid parameters' };\n  }\n  \n  const legacyUtils = globalThis.TrapSystem && globalThis.TrapSystem.utils;\n  if (!legacyUtils || typeof legacyUtils.parseTrapNotes !== 'function') {\n    return { success: false, message: 'Legacy utilities not available' };\n  }\n  \n  const trapData = legacyUtils.parseTrapNotes(trapToken.get('gmnotes'), trapToken);\n  if (!trapData) {\n    return { success: false, message: 'Invalid trap configuration' };\n  }\n  \n  // Get the appropriate DC for this skill type\n  let dc = 15; // default\n  switch (skillType.toLowerCase()) {\n    case 'perception':\n      dc = trapData.passivePerception || trapData.dc || 15;\n      break;\n    case 'investigation':\n      dc = trapData.investigationDC || trapData.dc || 15;\n      break;\n    case 'sleight of hand':\n    case 'thieves tools':\n      dc = trapData.disarmDC || trapData.dc || 15;\n      break;\n    default:\n      dc = trapData.dc || 15;\n  }\n  \n  // If no roll result provided, we're just setting up the check\n  if (rollResult === null) {\n    return {\n      success: true,\n      dc: dc,\n      skillType: skillType,\n      message: `${skillType} check required (DC ${dc})`\n    };\n  }\n  \n  const success = rollResult >= dc;\n  const margin = rollResult - dc;\n  \n  return {\n    success: success,\n    rollResult: rollResult,\n    dc: dc,\n    margin: margin,\n    skillType: skillType,\n    message: success \n      ? `${skillType} check succeeded! (${rollResult} vs DC ${dc}, margin: +${margin})`\n      : `${skillType} check failed. (${rollResult} vs DC ${dc}, margin: ${margin})`\n  };\n}\n\n// Handle trap detection attempt\nfunction handleDetectionAttempt(characterToken, trapToken, rollResult = null) {\n  const result = performSkillCheck(characterToken, trapToken, 'Perception', rollResult);\n  \n  if (result.success && rollResult !== null) {\n    // Character successfully detected the trap\n    const legacyUtils = globalThis.TrapSystem && globalThis.TrapSystem.utils;\n    if (legacyUtils && typeof legacyUtils.updateTrapAura === 'function') {\n      legacyUtils.updateTrapAura(trapToken, { isDetected: true });\n    }\n    \n    TrapUtils.log(`${characterToken.get('name')} detected a trap!`, 'success');\n    return { ...result, detected: true };\n  }\n  \n  return { ...result, detected: false };\n}\n\n// Handle trap disarm attempt\nfunction handleDisarmAttempt(characterToken, trapToken, rollResult = null) {\n  const result = performSkillCheck(characterToken, trapToken, 'Sleight of Hand', rollResult);\n  \n  if (result.success && rollResult !== null) {\n    // Character successfully disarmed the trap\n    const legacyUtils = globalThis.TrapSystem && globalThis.TrapSystem.utils;\n    if (legacyUtils && typeof legacyUtils.toggleTrap === 'function') {\n      legacyUtils.toggleTrap(trapToken); // Disarm the trap\n    }\n    \n    TrapUtils.log(`${characterToken.get('name')} disarmed the trap!`, 'success');\n    return { ...result, disarmed: true };\n  } else if (rollResult !== null && result.margin < -5) {\n    // Critical failure - trigger the trap\n    TrapUtils.log(`${characterToken.get('name')} triggered the trap while trying to disarm it!`, 'warning');\n    \n    const legacyUtils = globalThis.TrapSystem && globalThis.TrapSystem.utils;\n    if (legacyUtils && typeof legacyUtils.triggerTrap === 'function') {\n      legacyUtils.triggerTrap(trapToken, characterToken);\n    }\n    \n    return { ...result, triggered: true };\n  }\n  \n  return { ...result, disarmed: false, triggered: false };\n}\n\n// Get nearby characters for interaction\nfunction getNearbyCharacters(trapToken, maxDistance = 30) {\n  if (!trapToken) return [];\n  \n  const pageId = trapToken.get('_pageid');\n  const allTokens = findObjs({ _type: 'graphic', _pageid: pageId });\n  \n  return allTokens.filter(token => {\n    // Filter for character tokens (have represents field)\n    if (!token.get('represents')) return false;\n    \n    // Check distance\n    const distance = TrapUtils.geometry.calculateTokenDistance(trapToken, token);\n    return distance.mapUnitDistance <= maxDistance;\n  });\n}\n\n// Build and send interaction menu\nfunction showInteractionMenu(trapToken, characterTokens = null) {\n  if (!trapToken) {\n    TrapUtils.log('No trap token provided for interaction menu', 'error');\n    return;\n  }\n  \n  const nearbyChars = characterTokens || getNearbyCharacters(trapToken);\n  \n  // Import ui system dynamically to avoid circular imports\n  const uiSystem = globalThis.TrapSystem && globalThis.TrapSystem.ui;\n  if (uiSystem && typeof uiSystem.buildInteractionMenu === 'function') {\n    const menu = uiSystem.buildInteractionMenu(trapToken, nearbyChars);\n    if (menu) {\n      uiSystem.sendGM(menu);\n    }\n  } else {\n    TrapUtils.log('UI system not available for interaction menu', 'error');\n  }\n}\n\n// Process interaction command\nfunction processInteractionCommand(command, args = []) {\n  if (!TrapUtils.validateCommandArgs(args, 1, command)) return;\n  \n  const tokenId = args[0];\n  const token = getObj('graphic', tokenId);\n  \n  if (!token) {\n    TrapUtils.log(`Token ${tokenId} not found`, 'error');\n    return;\n  }\n  \n  switch (command.toLowerCase()) {\n    case 'perception-check':\n    case 'detect':\n      if (args.length >= 2) {\n        const trapId = args[1];\n        const trapToken = getObj('graphic', trapId);\n        if (trapToken) {\n          const result = handleDetectionAttempt(token, trapToken);\n          TrapUtils.log(result.message, result.success ? 'success' : 'info');\n        }\n      }\n      break;\n      \n    case 'disable-check':\n    case 'disarm':\n      if (args.length >= 2) {\n        const trapId = args[1];\n        const trapToken = getObj('graphic', trapId);\n        if (trapToken) {\n          const result = handleDisarmAttempt(token, trapToken);\n          TrapUtils.log(result.message, result.success ? 'success' : 'warning');\n        }\n      }\n      break;\n      \n    case 'interact':\n      if (TrapUtils.isTrap(token)) {\n        showInteractionMenu(token);\n      } else {\n        TrapUtils.log('Selected token is not a trap', 'error');\n      }\n      break;\n      \n    default:\n      TrapUtils.log(`Unknown interaction command: ${command}`, 'error');\n  }\n}\n\nexport const interaction = {\n  performSkillCheck,\n  handleDetectionAttempt,\n  handleDisarmAttempt,\n  getNearbyCharacters,\n  showInteractionMenu,\n  processInteractionCommand\n};\n\nexport default interaction;","// src/trap-macros.js\n// Macro execution & export logic\n\nimport TrapUtils from './trap-utils.js';\nimport { Config } from './trap-core.js';\n\n// Build a tag-to-ID mapping for macro placeholder replacement\nfunction buildTagToIdMap(tokens = []) {\n  const tagMap = {};\n  tokens.forEach(token => {\n    if (!token) return;\n    const name = token.get('name') || '';\n    if (name.trim()) {\n      const tag = name.toLowerCase().replace(/[^a-z0-9]/g, '');\n      if (tag) tagMap[tag] = token.id;\n    }\n  });\n  return tagMap;\n}\n\n// Replace macro placeholders with actual token IDs\nfunction replaceMacroPlaceholdersWithTags(macroString, tagMap = {}) {\n  if (!macroString || typeof macroString !== 'string') return macroString;\n  \n  let processed = macroString;\n  \n  // Replace @{target|...} patterns\n  processed = processed.replace(/@\\{target\\|([^}]+)\\}/g, (match, property) => {\n    return `@{target|${property}}`;\n  });\n  \n  // Replace @{selected|...} patterns  \n  processed = processed.replace(/@\\{selected\\|([^}]+)\\}/g, (match, property) => {\n    return `@{selected|${property}}`;\n  });\n  \n  // Replace custom tags like @{goblin|token_id}\n  Object.keys(tagMap).forEach(tag => {\n    const regex = new RegExp(`@\\\\{${tag}\\\\|([^}]+)\\\\}`, 'gi');\n    processed = processed.replace(regex, (match, property) => {\n      if (property === 'token_id') {\n        return tagMap[tag];\n      }\n      return `@{${tagMap[tag]}|${property}}`;\n    });\n  });\n  \n  return processed;\n}\n\n// Execute a macro string (delegates to Roll20's sendChat)\nfunction executeMacro(macroString, characterName = 'TrapSystem') {\n  if (!macroString || typeof macroString !== 'string') {\n    TrapUtils.log('Cannot execute empty macro', 'error');\n    return false;\n  }\n  \n  try {\n    // Handle different macro types\n    if (macroString.startsWith('#')) {\n      // Roll20 macro - remove # and execute\n      const macroName = macroString.slice(1);\n      sendChat(characterName, `#${macroName}`);\n    } else if (macroString.startsWith('!')) {\n      // API command\n      sendChat(characterName, macroString);\n    } else if (macroString.startsWith('&{')) {\n      // Roll template\n      sendChat(characterName, macroString);\n    } else {\n      // Regular chat message\n      sendChat(characterName, macroString);\n    }\n    \n    TrapUtils.log(`Executed macro: ${TrapUtils.getSafeMacroDisplayName(macroString)}`, 'success');\n    return true;\n  } catch (error) {\n    TrapUtils.log(`Macro execution failed: ${error.message}`, 'error');\n    return false;\n  }\n}\n\n// Process and execute trap macros with token context\nfunction executeTrapMacros(trapToken, macroList = [], targetTokens = []) {\n  if (!trapToken || !Array.isArray(macroList)) return;\n  \n  const tagMap = buildTagToIdMap([trapToken, ...targetTokens]);\n  \n  macroList.forEach((macro, index) => {\n    if (!macro) return;\n    \n    const processedMacro = replaceMacroPlaceholdersWithTags(macro, tagMap);\n    \n    // Add a small delay between macros to prevent spam\n    setTimeout(() => {\n      executeMacro(processedMacro, trapToken.get('name') || 'Trap');\n    }, index * 100);\n  });\n}\n\n// Export trap configuration as a macro\nfunction exportTrapAsMacro(trapToken) {\n  if (!TrapUtils.validateTrapToken(trapToken, 'exportTrapAsMacro')) return null;\n  \n  const legacyUtils = globalThis.TrapSystem && globalThis.TrapSystem.utils;\n  if (!legacyUtils || typeof legacyUtils.parseTrapNotes !== 'function') {\n    TrapUtils.log('Legacy utilities not available for export', 'error');\n    return null;\n  }\n  \n  const trapData = legacyUtils.parseTrapNotes(trapToken.get('gmnotes'), trapToken);\n  if (!trapData) {\n    TrapUtils.log('Invalid trap configuration for export', 'error');\n    return null;\n  }\n  \n  // Generate macro command to recreate this trap\n  const macroCommand = `!trapsystem create-trap --name \"${trapData.name || 'Exported Trap'}\" --trigger \"${trapData.triggerType || 'movement'}\" --dc ${trapData.dc || 15}`;\n  \n  return {\n    name: `Create: ${trapData.name || 'Trap'}`,\n    command: macroCommand,\n    description: `Creates a trap: ${trapData.name || 'Unnamed'}`\n  };\n}\n\n// Batch export multiple traps\nfunction exportMultipleTraps(trapTokens = []) {\n  const exports = [];\n  \n  trapTokens.forEach(token => {\n    const exported = exportTrapAsMacro(token);\n    if (exported) exports.push(exported);\n  });\n  \n  return exports;\n}\n\nexport const macros = {\n  buildTagToIdMap,\n  replaceMacroPlaceholdersWithTags,\n  executeMacro,\n  executeTrapMacros,\n  exportTrapAsMacro,\n  exportMultipleTraps\n};\n\nexport default macros;","// src/trap-ui.js\n// Chat/menu rendering utilities.\n\nimport TrapUtils from './trap-utils.js';\nimport { Config } from './trap-core.js';\n\nfunction buildDefaultTemplate(sections) {\n  // sections: array of strings already formatted like \"name=...\" or \"Token=...\"\n  return `&{template:default} {{${sections.join('}} {{')}}}`;\n}\n\nfunction sendGM(menuString) {\n  TrapUtils.chat(menuString);\n}\n\n// Build a trap status menu with current configuration\nfunction buildTrapStatusMenu(trapToken) {\n  if (!trapToken) return null;\n  \n  const legacyUtils = globalThis.TrapSystem && globalThis.TrapSystem.utils;\n  if (!legacyUtils || typeof legacyUtils.parseTrapNotes !== 'function') {\n    return 'Legacy utilities not available';\n  }\n  \n  const trapData = legacyUtils.parseTrapNotes(trapToken.get('gmnotes'), trapToken);\n  if (!trapData) return 'Invalid trap configuration';\n  \n  const tokenImage = TrapUtils.getTokenImageURL(trapToken, 'thumb');\n  const statusEmoji = trapData.isArmed ? '🔴' : '🟢';\n  const usesText = trapData.currentUses > 0 ? `${trapData.currentUses}/${trapData.maxUses}` : 'Depleted';\n  \n  const sections = [\n    `name=${statusEmoji} ${trapData.name || 'Unnamed Trap'}`,\n    `Token=<img src=\"${tokenImage}\" style=\"width:40px;height:40px;\">`,\n    `Status=${trapData.isArmed ? 'Armed' : 'Disarmed'}`,\n    `Uses=${usesText}`,\n    `DC=${trapData.dc || 'N/A'}`,\n    `Type=${trapData.triggerType || 'Unknown'}`,\n    `Actions=[Toggle](!trapsystem toggle @{selected|token_id}) [Edit](!trapsystem edit @{selected|token_id})`\n  ];\n  \n  return buildDefaultTemplate(sections);\n}\n\n// Build a skill check menu\nfunction buildSkillCheckMenu(characterToken, trapToken, skillType = 'Investigation') {\n  if (!characterToken || !trapToken) return null;\n  \n  const charImage = TrapUtils.getTokenImageURL(characterToken, 'thumb');\n  const trapImage = TrapUtils.getTokenImageURL(trapToken, 'thumb');\n  const skillEmoji = Config.SKILL_TYPES[skillType] || '🎲';\n  \n  const sections = [\n    `name=${skillEmoji} ${skillType} Check`,\n    `Character=<img src=\"${charImage}\" style=\"width:30px;height:30px;\"> ${characterToken.get('name')}`,\n    `Target=<img src=\"${trapImage}\" style=\"width:30px;height:30px;\"> Trap`,\n    `Roll=[${skillType}](!roll 1d20+@{selected|${skillType.toLowerCase()}_mod} vs DC ?{DC|15})`,\n    `Actions=[Auto-Resolve](!trapsystem skill-check ${characterToken.id} ${trapToken.id} ${skillType})`\n  ];\n  \n  return buildDefaultTemplate(sections);\n}\n\n// Build an interaction menu for a trap\nfunction buildInteractionMenu(trapToken, characterTokens = []) {\n  if (!trapToken) return null;\n  \n  const legacyUtils = globalThis.TrapSystem && globalThis.TrapSystem.utils;\n  if (!legacyUtils || typeof legacyUtils.parseTrapNotes !== 'function') {\n    return 'Legacy utilities not available';\n  }\n  \n  const trapData = legacyUtils.parseTrapNotes(trapToken.get('gmnotes'), trapToken);\n  if (!trapData) return 'Invalid trap configuration';\n  \n  const trapImage = TrapUtils.getTokenImageURL(trapToken, 'thumb');\n  const statusEmoji = trapData.isArmed ? '🔴' : '🟢';\n  \n  const characterList = characterTokens.map(token => \n    `<img src=\"${TrapUtils.getTokenImageURL(token, 'thumb')}\" style=\"width:20px;height:20px;\"> ${token.get('name')}`\n  ).join('<br>');\n  \n  const sections = [\n    `name=${statusEmoji} Trap Interaction`,\n    `Trap=<img src=\"${trapImage}\" style=\"width:40px;height:40px;\"> ${trapData.name || 'Unnamed'}`,\n    `Characters=${characterList || 'None nearby'}`,\n    `Detection=[Perception Check](!trapsystem perception-check @{selected|token_id} ${trapToken.id})`,\n    `Disarm=[Disable Check](!trapsystem disable-check @{selected|token_id} ${trapToken.id})`,\n    `Actions=[Trigger Manually](!trapsystem trigger ${trapToken.id}) [Reset](!trapsystem reset ${trapToken.id})`\n  ];\n  \n  return buildDefaultTemplate(sections);\n}\n\n// Send a formatted error message\nfunction sendError(message, recipient = 'gm') {\n  const errorMsg = `❌ **Error:** ${message}`;\n  if (recipient === 'gm') {\n    TrapUtils.chat(errorMsg);\n  } else {\n    TrapUtils.whisper(recipient, errorMsg);\n  }\n}\n\n// Send a formatted success message\nfunction sendSuccess(message, recipient = 'gm') {\n  const successMsg = `✅ **Success:** ${message}`;\n  if (recipient === 'gm') {\n    TrapUtils.chat(successMsg);\n  } else {\n    TrapUtils.whisper(recipient, successMsg);\n  }\n}\n\n// Send a formatted info message\nfunction sendInfo(message, recipient = 'gm') {\n  const infoMsg = `ℹ️ **Info:** ${message}`;\n  if (recipient === 'gm') {\n    TrapUtils.chat(infoMsg);\n  } else {\n    TrapUtils.whisper(recipient, infoMsg);\n  }\n}\n\nexport const ui = {\n  buildDefaultTemplate,\n  sendGM,\n  buildTrapStatusMenu,\n  buildSkillCheckMenu,\n  buildInteractionMenu,\n  sendError,\n  sendSuccess,\n  sendInfo\n};\n\nexport default ui;","// src/trap-triggers.js\n// Initial migration of trigger-control helpers (wrapper around legacy for now)\n\nimport TrapUtils from './trap-utils.js';\nimport { Config } from './trap-core.js';\nimport { ui } from './trap-ui.js';\n\nfunction toggleTrap(token) {\n  if (!TrapUtils.validateTrapToken(token, 'toggleTrap')) return;\n  const data = TrapUtils.parseTrapNotes(token.get('gmnotes'), token);\n  if (!data) {\n    TrapUtils.chat('❌ Invalid trap configuration.');\n    return;\n  }\n  const newArmed = !data.isArmed;\n  let newUses = data.currentUses;\n  if (newArmed && newUses <= 0) newUses = 1;\n  TrapUtils.updateTrapUses(token, newUses, data.maxUses, newArmed);\n  TrapUtils.chat(`${newArmed ? '🎯 Armed' : '🔴 Disarmed'} (uses ${newUses}/${data.maxUses})`);\n}\n\nfunction getTrapStatus(token) {\n  if (!token) return;\n  const d = TrapUtils.parseTrapNotes(token.get('gmnotes'), token);\n  if (!d) {\n    TrapUtils.chat('❌ Invalid trap config.');\n    return;\n  }\n  const msg = [];\n  msg.push('&{template:default} {{name=Trap Status}}');\n  msg.push(`{{State=${d.isArmed ? '🎯 ARMED' : '🔴 DISARMED'}}}`);\n  msg.push(`{{Uses=${d.currentUses}/${d.maxUses}}}`);\n  if (d.type === 'interaction') {\n    if (d.primaryMacro && d.primaryMacro.macro) msg.push(`{{Primary=${TrapUtils.getSafeMacroDisplayName(d.primaryMacro.macro)}}}`);\n    if (d.successMacro) msg.push(`{{Success=${TrapUtils.getSafeMacroDisplayName(d.successMacro)}}}`);\n    if (d.failureMacro) msg.push(`{{Failure=${TrapUtils.getSafeMacroDisplayName(d.failureMacro)}}}`);\n    if (d.checks && d.checks.length) {\n      const checkInfo = d.checks.map(c => `${Config.SKILL_TYPES[c.type] || '🎲'} ${c.type} (DC ${c.dc})`).join('<br>');\n      msg.push(`{{Checks=${checkInfo}}}`);\n    }\n  }\n  msg.push(`{{Movement Trigger=${d.movementTrigger ? 'On' : 'Off'}}}`);\n  msg.push(`{{Auto Trigger=${d.autoTrigger ? 'On' : 'Off'}}}`);\n  msg.push(`{{Position=${typeof d.position === 'object' ? `(${d.position.x},${d.position.y})` : d.position}}}`);\n  sendChat('TrapSystem', `/w gm ${msg.join(' ')}`);\n}\n\nfunction manualTrigger(trapToken) {\n  if (!trapToken) {\n    TrapUtils.chat('❌ No trap token selected.');\n    return;\n  }\n  const data = TrapUtils.parseTrapNotes(trapToken.get('gmnotes'), trapToken);\n  if (!data) {\n    TrapUtils.chat('❌ Invalid trap configuration.');\n    return;\n  }\n\n  // Auto-trigger shortcut\n  if (data.autoTrigger && data.primaryMacro && data.primaryMacro.macro) {\n    manualMacroTrigger(trapToken.id, 'primary');\n    return;\n  }\n\n  // Interaction trap shows menu\n  if (data.type === 'interaction') {\n    // For now, show basic status (menu system will be migrated later)\n    TrapUtils.chat('🔧 Interaction trap - full menu system coming in next migration phase');\n    getTrapStatus(trapToken);\n    return;\n  }\n\n  // Standard trap control panel\n  const panel = [];\n  panel.push('&{template:default} {{name=Trap Control Panel}}');\n  panel.push(`{{State=🎯 ${data.isArmed ? 'ARMED' : '🔴 DISARMED'} Uses: ${data.currentUses}/${data.maxUses}}}`);\n  panel.push(`{{Management=[🔄 Toggle](!trapsystem toggle ${trapToken.id}) [📊 Status](!trapsystem status ${trapToken.id})}}`);\n\n  if (data.isArmed && data.currentUses > 0) {\n    panel.push(`{{Reminder=⚠️ Ensure correct trap token selected for macros!}}`);\n    panel.push(`{{After Trigger=${data.currentUses > 1 ? '🎯 ARMED' : '🔴 AUTO-DISARMED'} Uses: ${data.currentUses - 1}/${data.maxUses}}}`);\n    \n    let triggerOpts = '';\n    if (data.primaryMacro && data.primaryMacro.macro) {\n      triggerOpts += `[🎯 ${TrapUtils.getSafeMacroDisplayName(data.primaryMacro.macro)}](!trapsystem manualtrigger ${trapToken.id} primary)`;\n    }\n    if (data.options && data.options.length > 0) {\n      data.options.forEach((opt, i) => {\n        if (triggerOpts) triggerOpts += ' ';\n        triggerOpts += `[🎯 ${TrapUtils.getSafeMacroDisplayName(opt.macro)}](!trapsystem manualtrigger ${trapToken.id} option ${i})`;\n      });\n    }\n    panel.push(`{{Trigger Options=${triggerOpts || '(DE)'}}}`);\n  } else {\n    panel.push(`{{Note=Trap disarmed or out of uses. Toggle to enable triggers.}}`);\n  }\n  \n  panel.push('}}');\n  sendChat('API', `/w gm ${panel.join(' ')}`);\n}\n\nfunction manualMacroTrigger(trapId, macroIdentifier) {\n  const trapToken = getObj('graphic', trapId);\n  if (!trapToken) {\n    TrapUtils.chat('❌ Trap token not found.');\n    return;\n  }\n  const data = TrapUtils.parseTrapNotes(trapToken.get('gmnotes'), trapToken);\n  if (!data || !data.isArmed || data.currentUses <= 0) {\n    TrapUtils.chat('❌ Trap cannot be triggered (disarmed or no uses).');\n    return;\n  }\n\n  const tagMap = TrapUtils.buildTagToIdMap(trapToken, null, []);\n  let macroToExecute = null;\n  \n  if (macroIdentifier === 'primary') {\n    macroToExecute = data.primaryMacro?.macro;\n  } else if (macroIdentifier.startsWith('option')) {\n    const optIndex = parseInt(macroIdentifier.split(' ')[1], 10);\n    macroToExecute = data.options?.[optIndex]?.macro;\n  }\n  \n  if (macroToExecute) {\n    const executed = TrapUtils.executeMacro(macroToExecute, tagMap);\n    if (executed) {\n      const newUses = data.currentUses - 1;\n      const stillArmed = newUses > 0;\n      TrapUtils.updateTrapUses(trapToken, newUses, data.maxUses, stillArmed);\n      if (!stillArmed) {\n        TrapUtils.chat('💥 Trap depleted and disarmed.');\n      }\n    } else {\n      TrapUtils.chat('❌ Macro execution failed.');\n    }\n  } else {\n    TrapUtils.chat('❌ Invalid macro identifier.');\n  }\n}\n\n// Helper to process macro strings for trap setup\nfunction processMacro(macroCmd) {\n  if (!macroCmd || typeof macroCmd !== 'string' || macroCmd.trim().toLowerCase() === 'none' || macroCmd.trim() === '') {\n    return null;\n  }\n\n  let content = macroCmd.trim();\n\n  // Handle disguised templates like ^{template:...}\n  if (content.startsWith('^')) {\n    content = '&' + content.substring(1);\n  }\n\n  if (content.startsWith('\"') && content.endsWith('\"')) {\n    content = content.substring(1, content.length - 1).trim();\n  }\n\n  if (content.startsWith('&{')) { // Roll template\n    return `\"${content.replace(/\"/g, '\\\\\"')}\"`;\n  }\n  if (content.startsWith('!')) {\n    return `\"$${content.substring(1)}\"`;\n  }\n  if (content.startsWith('$')) {\n    return `\"${content}\"`;\n  }\n  if (content.startsWith('#')) {\n    const macroName = content.substring(1).trim();\n    if (findObjs({ _type: 'macro', name: macroName }).length === 0) {\n      TrapUtils.chat(`⚠️ Warning: Macro \"${macroName}\" not found.`);\n    }\n    return content;\n  }\n  if (findObjs({ _type: 'macro', name: content }).length > 0) {\n    return '#' + content;\n  }\n  return `\"${content.replace(/\"/g, '\\\\\"')}\"`;\n}\n\nfunction setupTrap(token, uses, mainMacro, optionalMacro2, optionalMacro3, movement, autoTrigger) {\n  if (!token) {\n    TrapUtils.chat('❌ No token selected.');\n    return;\n  }\n\n  // Preserve existing detection block if any\n  const existingNotes = token.get('gmnotes') || '';\n  let decoded = '';\n  try { decoded = decodeURIComponent(existingNotes); } catch (_) { decoded = existingNotes; }\n  const detectionMatch = decoded.match(/(\\{!trapdetection\\s+(?:(?!\\{!}).)*\\})/);\n  const existingDetection = detectionMatch ? detectionMatch[0] : '';\n\n  const maxUses = parseInt(uses, 10);\n  if (isNaN(maxUses) || maxUses < 1) {\n    TrapUtils.chat('❌ Uses must be a positive number.');\n    return;\n  }\n\n  const primaryProcessed = processMacro(mainMacro);\n  if (!primaryProcessed) {\n    TrapUtils.chat('❌ Primary macro required for standard trap.');\n    return;\n  }\n\n  let parts = [\n    'type:[standard]',\n    `uses:[${maxUses}/${maxUses}]`,\n    'armed:[on]',\n    `primaryMacro:[${primaryProcessed}]`\n  ];\n\n  // Process optional macros\n  const options = [];\n  const opt2 = processMacro(optionalMacro2);\n  if (opt2) options.push(opt2);\n  const opt3 = processMacro(optionalMacro3);\n  if (opt3) options.push(opt3);\n  if (options.length > 0) {\n    parts.push(`options:[${options.join(';')}]`);\n  }\n\n  // Movement setting\n  let movementSetting = 'intersection';\n  if (movement) {\n    const movLower = movement.toLowerCase();\n    if (movLower === 'center' || movLower === 'grid') {\n      movementSetting = movLower === 'grid' ? '0,0' : 'center';\n    } else if (movLower.match(/^\\d+,\\d+$/)) {\n      movementSetting = movLower;\n    }\n  }\n  parts.push(`position:[${movementSetting}]`);\n  parts.push('movementTrigger:[on]');\n  parts.push(`autoTrigger:[${autoTrigger && (autoTrigger.toString().toLowerCase() === 'true' || autoTrigger === true) ? 'on' : 'off'}]`);\n\n  const newBlock = `{!traptrigger ${parts.join(' ')}}`;\n  const finalNotes = `${newBlock} ${existingDetection}`.trim();\n\n  try {\n    const encoded = encodeURIComponent(finalNotes);\n    token.set({\n      gmnotes: encoded,\n      bar1_value: maxUses,\n      bar1_max: maxUses,\n      showplayers_bar1: false,\n      aura1_radius: TrapUtils.calculateDynamicAuraRadius(token),\n      aura1_color: Config.AURA_COLORS.ARMED,\n      showplayers_aura1: false\n    });\n    getTrapStatus(token);\n  } catch (e) {\n    TrapUtils.chat('❌ Error setting trap properties.');\n    TrapUtils.log(`setupTrap error: ${e.message}`, 'error');\n  }\n}\n\nfunction setupInteractionTrap(token, uses, primaryMacro, successMacro, failureMacro, check1Type, check1DC, check2Type, check2DC, movementTriggerEnabled = true, movement = 'intersection', autoTriggerEnabled = false) {\n  if (!token) {\n    TrapUtils.chat('❌ No token selected.');\n    return;\n  }\n\n  // Preserve existing detection block\n  const existingNotes = token.get('gmnotes') || '';\n  let decoded = '';\n  try { decoded = decodeURIComponent(existingNotes); } catch (_) { decoded = existingNotes; }\n  const detectionMatch = decoded.match(/(\\{!trapdetection\\s+(?:(?!\\{!}).)*\\})/);\n  const existingDetection = detectionMatch ? detectionMatch[0] : '';\n\n  let positionValue = movement ? movement.toLowerCase() : 'intersection';\n  if (positionValue === 'grid') positionValue = '0,0';\n\n  const maxUses = parseInt(uses, 10);\n  if (isNaN(maxUses) || maxUses < 1) {\n    TrapUtils.chat('❌ Uses must be a positive number.');\n    return;\n  }\n\n  let parts = [\n    'type:[interaction]',\n    `uses:[${maxUses}/${maxUses}]`,\n    'armed:[on]'\n  ];\n\n  // Process macros\n  const primaryProcessed = processMacro(primaryMacro);\n  if (primaryProcessed) parts.push(`primaryMacro:[${primaryProcessed}]`);\n  \n  const successProcessed = processMacro(successMacro);\n  if (successProcessed) parts.push(`successMacro:[${successProcessed}]`);\n  \n  const failureProcessed = processMacro(failureMacro);\n  if (failureProcessed) parts.push(`failureMacro:[${failureProcessed}]`);\n\n  // Process checks\n  const checks = [];\n  if (check1Type && check1Type.toLowerCase() !== 'none') {\n    const dc1 = parseInt(check1DC, 10);\n    if (isNaN(dc1)) {\n      TrapUtils.chat('❌ First check DC must be a number.');\n      return;\n    }\n    checks.push(`${check1Type.trim()}:${dc1}`);\n  }\n  if (check2Type && check2Type.toLowerCase() !== 'none') {\n    const dc2 = parseInt(check2DC, 10);\n    if (isNaN(dc2)) {\n      TrapUtils.chat('❌ Second check DC must be a number.');\n      return;\n    }\n    checks.push(`${check2Type.trim()}:${dc2}`);\n  }\n  if (checks.length > 0) {\n    parts.push(`checks:[${checks.join(';')}]`);\n  }\n\n  const movementEnabled = (typeof movementTriggerEnabled === 'string' && movementTriggerEnabled.toLowerCase() === 'true') || movementTriggerEnabled === true;\n  parts.push(`movementTrigger:[${movementEnabled ? 'on' : 'off'}]`);\n  \n  const autoEnabled = (typeof autoTriggerEnabled === 'string' && autoTriggerEnabled.toLowerCase() === 'true') || autoTriggerEnabled === true;\n  parts.push(`autoTrigger:[${autoEnabled ? 'on' : 'off'}]`);\n  parts.push(`position:[${positionValue}]`);\n\n  const newBlock = `{!traptrigger ${parts.join(' ')}}`;\n  const finalNotes = `${newBlock} ${existingDetection}`.trim();\n\n  try {\n    const encoded = encodeURIComponent(finalNotes);\n    token.set({\n      gmnotes: encoded,\n      aura1_radius: TrapUtils.calculateDynamicAuraRadius(token),\n      aura1_color: Config.AURA_COLORS.ARMED,\n      showplayers_aura1: false,\n      bar1_value: maxUses,\n      bar1_max: maxUses,\n      showplayers_bar1: false\n    });\n    getTrapStatus(token);\n  } catch (e) {\n    TrapUtils.chat('❌ Error setting trap properties.');\n    TrapUtils.log(`setupInteractionTrap error: ${e.message}`, 'error');\n  }\n}\n\nexport const triggers = {\n  toggleTrap,\n  getTrapStatus,\n  manualTrigger,\n  manualMacroTrigger,\n  setupTrap,\n  setupInteractionTrap\n};\n\nexport default triggers;","// src/trap-detector.js\n// Migration of movement-based detection helpers.\n\nimport TrapUtils from './trap-utils.js';\nimport { Config } from './trap-core.js';\n\n// Simple wrapper around legacy overlap check\nfunction checkGridOverlap(token1, token2) {\n  if (!token1 || !token2) return false;\n  const legacyUtils = globalThis.TrapSystem && globalThis.TrapSystem.utils;\n  if (legacyUtils && typeof legacyUtils.checkGridOverlap === 'function') {\n    return legacyUtils.checkGridOverlap(token1, token2);\n  }\n  // Fallback quick bounding-box overlap (approx)\n  const dx = Math.abs(token1.get('left') - token2.get('left'));\n  const dy = Math.abs(token1.get('top') - token2.get('top'));\n  const minDistX = (token1.get('width') + token2.get('width')) / 2;\n  const minDistY = (token1.get('height') + token2.get('height')) / 2;\n  return dx < minDistX && dy < minDistY;\n}\n\nfunction checkLineIntersection(startX, startY, endX, endY, trapToken) {\n  const legacyUtils = globalThis.TrapSystem && globalThis.TrapSystem.utils;\n  if (legacyUtils && typeof legacyUtils.checkLineIntersection === 'function') {\n    return legacyUtils.checkLineIntersection(startX, startY, endX, endY, trapToken);\n  }\n  return null; // simplified fallback\n}\n\nfunction calculateTrapPosition(movedToken, trapToken, intersectionPoint) {\n  const legacyUtils = globalThis.TrapSystem && globalThis.TrapSystem.utils;\n  if (legacyUtils && typeof legacyUtils.calculateTrapPosition === 'function') {\n    return legacyUtils.calculateTrapPosition(movedToken, trapToken, intersectionPoint);\n  }\n  return { initial: intersectionPoint, final: intersectionPoint };\n}\n\nexport const detector = {\n  checkGridOverlap,\n  checkLineIntersection,\n  calculateTrapPosition\n};\n\nexport default detector;","// Entry point that stitches the modular files together.\n// For now we export an empty scaffold TrapSystem with utilities.\n\nimport * as TrapUtils from './trap-utils.js';\nimport { Config, State } from './trap-core.js';\n\n// Placeholder imports – these modules will gradually be filled out.\nimport './trap-core.js';\nimport './trap-detection.js';\nimport { interaction as interactionSystem } from './trap-interaction.js';\nimport { macros as macroSystem } from './trap-macros.js';\nimport { ui as uiSystem } from './trap-ui.js';\nimport './trap-triggers.js';\nimport { detector } from './trap-detector.js';\nimport { detection as passiveDetection } from './trap-detection.js';\nimport { triggers as triggerSystem } from './trap-triggers.js';\n\nconst TrapSystem = {\n  utils: TrapUtils,\n  config: Config,\n  state: State,\n  // Namespaces to be wired up in later phases\n  core: { Config, State },\n  detection: {\n    movement: detector,\n    passive: passiveDetection\n  },\n  triggers: triggerSystem,\n  interaction: interactionSystem,\n  macros: macroSystem,\n  ui: uiSystem\n};\n\n// Expose globally so Roll20 can see it after bundling.\nglobalThis.TrapSystem = TrapSystem;\n\nconsole.log('📦 TrapSystem v2 scaffold loaded');\nconsole.log('🔧 Config loaded:', Config.AURA_COLORS ? 'Complete' : 'Incomplete');\n\nexport { TrapSystem };"],"names":["TrapUtils","passiveDetection","triggerSystem","interactionSystem","macroSystem","uiSystem"],"mappings":"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"}